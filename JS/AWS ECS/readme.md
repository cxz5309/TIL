# AWS ECS(Elastic Container Service)

> Amazon ECS는 컨테이너화된 애플리케이션의 손쉬운 배포, 관리 및 크기 조정을 지원하는 완전관리형 컨테이너 오케스트레이션 서비스입니다.  
![ecs1](/public/JS/ecs1.png)
ECR(Elastic Container Registry)에서 이미지를 읽은 후 ECS(Elastic Container Service)에서 관리한다. ECS에 있는 각각의 어플리케이션들은 ECS로 관리되어 가용성, 리전 관리, 배치처리 등의 컴퓨팅이 손쉽게 가능해진다.

## 기능
- AWS Fargate를 통한 기본적인 서버리스: AWS Fargate는 Amazon ECS에 내장되어 있습니다. 따라서 서버 관리, 용량 계획 처리 또는 보안을 위한 컨테이너 워크로드 격리에 대해 더 이상 고민할 필요가 없습니다. 콘솔 또는 Command Line Interface(CLI)에서 애플리케이션의 요구 사항을 정의하고 Fargate를 시작 유형으로 선택하면 Fargate가 컨테이너 실행에 필요한 모든 조정 및 인프라 관리를 처리합니다.
- Amazon ECS Anywhere: ECS Anywhere를 사용하면 익숙한 Amazon ECS 콘솔 및 운영자 도구를 사용하여 온프레미스 컨테이너 워크로드를 관리할 수 있으므로 컨테이너 기반 애플리케이션 전체에서 일관된 경험을 얻을 수 있습니다. AWS Systems Manager(SSM)를 통합하면 온프레미스 하드웨어와 AWS 제어 플레인 간의 신뢰가 자동으로 안전하게 설정됩니다.
- 보안 및 격리를 고려한 설계: Amazon ECS는 이미 신뢰하는 보안, 자격 증명 및 관리와 거버넌스 도구와 기본적으로 통합되므로 프로덕션으로 빠르게 전환하는 데 도움이 됩니다. 각 컨테이너에 대한 세분화된 권한을 할당하여 애플리케이션을 구축할 때 격리 수준을 개선할 수 있습니다. AWS에서 기대한 수준의 보안 및 규정 준수로 컨테이너를 시작하세요.
- 자율적인 제어 플레인 작업: Amazon ECS는 AWS 구성 및 운영 모범 사례가 포함되어 있고 제어 플레인, 노드 또는 추가 기능을 관리할 필요가 없는 완전관리형 컨테이너 오케스트레이션 서비스입니다. AWS와 서드 파티 도구에 기본적으로 통합되므로 환경이 아닌 애플리케이션을 구축하는 데 집중할 수 있습니다.
- 개발
  - Docker 지원
  - Windows 컨테이너 호환
  - AWS Copilot : Amazon ECS 및 AWS Fargate에서 프로덕션 준비 컨테이너식 애플리케이션을 구축, 릴리스 및 운영하는 데 사용되는 개발자용 도구
  - 리포지토리 지원(ECR)
- 관리
  - 태스크 정의
  - 프로그래밍 방식 제어
  - 컨테이너 배포 : Amazon ECS는 연결된 Application Load Balancer에 자동으로 컨테이너를 등록하고 등록 취소합니다.
  - 블루/그린 배포 : 애플리케이션 업데이트 중에 가동 중단 시간을 최소화하는 데 도움이 됩니다. 트래픽을 다시 라우팅하기 전에 새로운 버전의 Amazon ECS 서비스를 기존 버전과 함께 시작하고 새로운 버전을 테스트할 수 있습니다. 또한 배포 프로세스를 모니터링하고 문제가 발생할 경우 신속하게 롤백할 수 있습니다.
  - 컨테이너 자동 복구
  - Capacity Providers : 태스크 및 서비스를 실행할 때 Fargate 및 Fargate Spot 용량에 걸쳐 미리 정의된 분할 비율로 서비스를 실행하는 것과 같은 새로운 기능을 활성화하여 여러 용량 공급자에 태스크 및 서비스를 분할할 수 있습니다.
  - 스토리지(EFS)
- 일정 예약 및 태스크 배치
  - 작업 일정 예약
  - 서비스 일정 예약
  - 데몬 일정 예약
  - 태스크 배치
- 네트워킹
  - 서비스 검색(AWS Cloud Map) : AWS Cloud Map은 애플리케이션 리소스에 대한 사용자 지정 이름을 정의할 수 있는 클라우드 리소스 검색 서비스입니다. 웹 서비스에서 항상 이 동적으로 변화하는 리소스의 최신 위치를 검색하므로 애플리케이션 가용성이 개선됩니다.
  - 서비스 메시
  - 태스크 네트워킹
  - 로드 밸런싱 : Amazon ECS는 Elastic Load Balancing과 통합되므로 Application Load Balancer 또는 Network Load Balancer를 사용하여 컨테이너에 트래픽을 분산할 수 있습니다. 
- 모니터링 및 로깅
  - 모니터링(Amazon CloudWatch)
  - 로깅(AWS CloudTrail)
  - AWS Config
- 하이브리드 배포
  - AWS Outposts

------
- 완전관리형 컨테이너 오케스트레이션 툴
- 쿠버네티스보다 쉽고 aws 서비스에 대한 연결이 간단하며 aws로 모든 기능이 다 있다 보니까 간단하게 사용하기 쉽다.(그러나 돈이 나간다)
- fargate라는 서버리스 환경을 권장한다. fargate는 ec2에 비해 서버 용량 문제 등에서 자유로우며 기본적인 제공도 훌륭하다. 자습서도 대부분 이 환경이다. (그러나 돈이 나간다. 게다가 돈 안드는 ec2환경은 자습서가 적어 생각보다 어렵다..)
- ECR이라는 컨테이너 이미지 스토리지를 지원한다. 보기가 쉽게 되어 있어 사용성이 좋다..?(그러나 돈이 나간다.)
- AWS ELB(Elastic Load Balancer)를 사용한다. 컨테이너 오케스트레이션 특성상 로드밸런서는 필수이다. 
- Capacity Providers는 먼저 원하는 작업 수를 실행하는 데에 필요한 리소스와 그에 맞는 인스턴스 수를 계산한다. 그리고 현재 돌고 있는 인스턴스 수와 비교하여 인스턴스 수를 조정하는 방식으로 인프라를 관리한다. : 클릭 하나만으로 오토스케일링 고민이 사라진다.
- 완전관리형 오케스트레이션이므로(돈이 드므로) 다른 기본적인 기능들도 당연히 지원한다. 일정관리, 모니터링, 로깅, 보안 등 많은 손을 대지 않아도 

> 출처  
> https://velog.io/@dlawlrb/AWS-ECS-Capacity-Provider%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%98%EC%97%AC-%EC%98%A4%ED%86%A0%EC%8A%A4%EC%BC%80%EC%9D%BC%EB%A7%81%EC%9D%84-%EC%89%BD%EA%B2%8C-%EA%B4%80%EB%A6%AC%ED%95%98%EC%9E%90  