# ORM
> db를 코드로써 사용하기 쉽게 처리해주는 일종의 프레임워크 정도로 알고 있는데 더 알게 있나..?
> 프레임워크라기 보다는 모든 db를 공통으로 가능하게 해주는 개념이라 인터페이스가 더 맞고 그것을 사용하는 프레임워크도 동일한 말로써 쓰인단다.

## ORM(Object-relational mapping)
- 객체와 데이터베이스 테이블간의 매핑처리를 간단하게 해주는 프레임워크 등
- 객체는 객체대로 설계하고 관계형 데이터베이스는 관계형 데이터베이스대로 설계하여 ORM 프레임워크가 중간에서 매핑해준다.
- 데이터 생성, 데이터 조작 및 데이터 액세스를 단순화 한다.

> 킹갓 spring에서는 공식적으로 JPA를 만들어서 사용하며 프레임워크로 Hibernate, OpenJPA 등을 사용한다.  
> https://www.jetbrains.com/help/idea/hibernate.html?source=google&medium=cpc&campaign=9731471401&gclid=CjwKCAjwqeWKBhBFEiwABo_XBrqVdU2ThrwzvVvgipg-P1tV4H1DvLHka1vU8gdeSX8dCJz52eDzxBoCkx8QAvD_BwE  
> NodeJs에서는 sequalize를 사용하는 것이 일반적이라고 한다.  
> https://sequelize.org/  
> prisma도 ORM이다. GraphQL에서 사용할 수 있으며 GraphQL 자체가 쿼리문으로 되어있기 때문에 꽤 쉽고 편하게 쓸 수 있다(아마도)  
> https://www.prisma.io/  

## ODM(Object Document Mapping)
> 지금껏 mongoose를 orm이라고 생각했는데 odm이란다. 생각해보니 이름만 봐도 알 수 있었던 것..  
- document based로 된 NOSQL의 document와 객체를 매핑해준다.
- NOSQL의 종류는 구조에 따라 다양한데 document based가 보통 가장 유명하다. 그 db를 매핑해준다고 볼 수 있다.


## ORM의 장점
- 객체 지향적 코드로 인해 더 직관적이고 비즈니스 로직에 집중할 수 있도록 도와준다.
  - CRUD을 위한 긴 SQL 문장을 작성할 필요가 없다. (여전히 쿼리작성은 필요하지만)
  - 각 객체(Model)별로 코드를 작성하여 가독성을 높여 준다.
  - SQL의 절차적 접근이 아닌 객체적인 접근으로 생산성을 높여 준다.
- 재사용 및 유지보수의 편리성이 증가한다.
  - 매핑 정보가 명확하여, ERD를 보는 것에 대한 의존도를 낮출 수 있다.
  - ORM은 독립적으로 작성이 되어 있고 해당 객체들은 재사용이 가능 하다.
- DBMS에 대한 종속성이 줄어든다.
  - 대부분의 ORM은 DB에 종속적이지 않다.
  - 개발자는 Object에 집중함으로 DBMS를 교체하는 극단적인 작업에도 비교적 적은 리스크와 시간이 소요된다.
  - 종속적이지 않다는 것은 구현 방법 뿐만 아니라 많은 솔루션에서 자료형 타입까지 유효하다.
(*종속성: 프로그램 구조가 데이터 구조에 영향을 받는 것을 의미함.)  
## ORM의 단점
- 완벽한 ORM만으로는 구현하기가 어렵다.
  - 사용하기에는 편하지만 설계에는 매우 신중해야 한다.
  - 프로젝트의 복잡성이 높아질 경우 난이도 또한 올라갈 수 있다.
  - 잘못 구현된 경우 속도 저하 및 심한 경우 일관성이 무너지는 문제점이 생길 수 있다.
- 프로시저가 많은 시스템에서는 ORM의 객체 지향적인 장점을 활용하기 어렵다.
  - 이미 프로시저가 많은 시스템에서는 다시 객체로 바꿔야 하며, 그 과정에서 생산성 저하 혹은 리스크가 발생할 수 있다.

## 결론
- ORM은 생산성에 있어 큰 장점을 가지므로 (매우) 많이 사용하지만 결국엔 쿼리 작성을 직접 하는 것이 좋은 구조를 만들며 DB를 직접 이용하는 것과는 로직이 다를 수 있기 때문에 설계 미스에 큰 신경을 써야 한다. 